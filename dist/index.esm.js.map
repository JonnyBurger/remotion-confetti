{
  "version": 3,
  "sources": ["../src/index.tsx", "../src/confetti.ts", "../src/utils.ts"],
  "sourcesContent": ["import { useState, useEffect, useRef } from 'react'\nimport { useCurrentFrame, useVideoConfig } from 'remotion';\nimport { confettiCannon } from './confetti'\nimport { iConfettiOptions } from './interfaces'\n\nexport const Confetti = (confettiConfig: Omit<iConfettiOptions, 'width' | 'height'>) => {\n\n  const frame = useCurrentFrame();\n  const video = useVideoConfig();\n\n  const ref = useRef<HTMLCanvasElement | null>(null);\n  const [confettiInstance, setConfettiInstance] = useState<{ fire: (options: iConfettiOptions) => void, frame: (frame: number) => void } | null>(null);\n\n  useEffect(() => {\n    if (ref.current !== null && !confettiInstance) {\n      ref.current.width = video.width;\n      ref.current.height = video.height;\n      const confetti = confettiCannon(ref.current);\n      confetti.fire({\n        ...confettiConfig,\n        width: video.width,\n        height: video.height\n      });\n      setConfettiInstance(confetti);\n    }\n  }, [confettiConfig, confettiInstance, video])\n\n  useEffect(() => {\n    if (confettiInstance) {\n      confettiInstance.frame(frame);\n    }\n  }, [confettiInstance, frame]);\n\n  return <canvas ref={ref} style={{\n    width: `${video.width}px`, height: `${video.height}px`, position: 'absolute'\n  }} />;\n};\n\nexport default Confetti;", "import { random } from 'remotion';\nimport { iRandomPhysics, iFetti, iConfettiOptions } from './interfaces'\nimport { prop, onlyPositiveInt, randomInt, colorsToRgb } from './utils';\n\nconst RAD = (Math.PI / 180);\n\nconst randomPhysics = (opts: iRandomPhysics): iFetti => {\n\n  const radAngle = opts.angle * RAD;\n  const radSpread = opts.spread * RAD;\n\n  return {\n    x: opts.x,\n    y: opts.y,\n    wobble: random('wobble'+opts.i) * 10,\n    wobbleSpeed: Math.min(0.11, random('wobbleSpeed'+opts.i) * 0.1 + 0.05),\n    velocity: opts.startVelocity * 0.5 + random('velocity'+opts.i) * opts.startVelocity,\n    angle2D: -radAngle + (0.5 * radSpread - random('angle2D'+opts.i) * radSpread),\n    tiltAngle: (random('tiltAngle'+opts.i) * (0.75 - 0.25) + 0.25) * Math.PI,\n    color: opts.color,\n    shape: opts.shape,\n    tick: 0,\n    totalTicks: opts.ticks,\n    decay: opts.decay,\n    drift: opts.drift,\n    random: random('random'+opts.i) + 2,\n    tiltSin: 0,\n    tiltCos: 0,\n    wobbleX: 0,\n    wobbleY: 0,\n    gravity: opts.gravity * 3,\n    ovalScalar: 0.6,\n    scalar: opts.scalar\n  };\n}\n\nconst updateFetti = (context: CanvasRenderingContext2D, fetti: iFetti, frame: number) => {\n\n  const w = fetti.wobble + (fetti.wobbleSpeed * frame)\n\n  let v = fetti.velocity;\n  let {x} = fetti;\n  let {y} = fetti;\n\n  for (let i = 0; i < frame; i++) {\n    v *= fetti.decay;\n    x += Math.cos(fetti.angle2D) * v + fetti.drift;\n    y += Math.sin(fetti.angle2D) * v + fetti.gravity;\n  }\n\n  fetti.tiltAngle = 0.1 * frame;\n  fetti.tiltSin = Math.sin(fetti.tiltAngle);\n  fetti.tiltCos = Math.cos(fetti.tiltAngle);\n  // eslint-disable-next-line @remotion/deterministic-randomness\n  fetti.random = Math.random() + 2;\n  fetti.wobbleX = x + 10 * fetti.scalar * Math.cos(w);\n  fetti.wobbleY = y + 10 * fetti.scalar * Math.sin(w);\n\n  const progress = frame / fetti.totalTicks;\n\n  const x1 = x + fetti.random * fetti.tiltCos;\n  const y1 = y + fetti.random * fetti.tiltSin;\n  const x2 = fetti.wobbleX + fetti.random * fetti.tiltCos;\n  const y2 = fetti.wobbleY + fetti.random * fetti.tiltSin;\n\n  context.fillStyle =\n    'rgba(' +\n    fetti.color.r +\n    ', ' +\n    fetti.color.g +\n    ', ' +\n    fetti.color.b +\n    ', ' +\n    (1 - progress) +\n    ')';\n  context.beginPath();\n\n  // Console.log(fetti.shape)\n\n  if (fetti.shape === 'circle') {\n    context.ellipse(\n      x,\n      y,\n      Math.abs(x2 - x1) * fetti.ovalScalar,\n      Math.abs(y2 - y1) * fetti.ovalScalar,\n      Math.PI / 10 * w,\n      0,\n      2 * Math.PI\n    );\n  } else {\n    context.moveTo(Math.floor(x), Math.floor(y));\n    context.lineTo(Math.floor(fetti.wobbleX), Math.floor(y1));\n    context.lineTo(Math.floor(x2), Math.floor(y2));\n    context.lineTo(Math.floor(x1), Math.floor(fetti.wobbleY));\n  }\n\n  context.closePath();\n  context.fill();\n\n  return true;\n}\n\nconst animate = (canvas: HTMLCanvasElement, fettis: iFetti[], size: { width: number, height: number }) => {\n\n  const context = canvas.getContext('2d');\n\n  let animatingFettis = fettis.slice();\n\n  function onDone() {\n    if (!context) return\n    context.clearRect(0, 0, size.width, size.height);\n  }\n\n  /*\n  The animation bit\n  */\n  function update(frame: number) {\n    if (!context) return\n  \n    if (!size.width && !size.height) {\n      size.width = canvas.width;\n      size.height = canvas.height;\n    }\n\n    context.clearRect(0, 0, size.width, size.height);\n\n    animatingFettis = animatingFettis.filter((fetti) => {\n      return updateFetti(context, fetti, frame);\n    });\n\n    if (!animatingFettis.length) {\n      onDone();\n    }\n  }\n\n  return {\n    canvas,\n    update\n  };\n}\n\nexport const confettiCannon = (canvas: HTMLCanvasElement) => {\n  let animationObj: any;\n\n  function fireLocal(options: iConfettiOptions, size: { width: number, height: number }) {\n    const particleCount = prop(options, 'particleCount', onlyPositiveInt);\n    const angle = prop(options, 'angle', Number);\n    const spread = prop(options, 'spread', Number);\n    const startVelocity = prop(options, 'startVelocity', Number);\n    const decay = prop(options, 'decay', Number);\n    const gravity = prop(options, 'gravity', Number);\n    const drift = prop(options, 'drift', Number);\n    const colors = prop(options, 'colors', colorsToRgb);\n    const ticks = prop(options, 'ticks', Number);\n    const shapes = prop(options, 'shapes');\n    const scalar = prop(options, 'scalar');\n    const origin = { x: options.x, y: options.y};\n\n    let temp = particleCount;\n    const fettis = [];\n\n    const startX = origin.x;\n    const startY = origin.y;\n\n    while (temp--) {\n      fettis.push(\n        randomPhysics({\n          x: startX,\n          y: startY,\n          angle,\n          spread,\n          startVelocity,\n          color: colors[temp % colors.length],\n          shape: shapes[randomInt(0, shapes.length)],\n          ticks,\n          decay,\n          gravity,\n          drift,\n          scalar,\n          i: temp\n        })\n      );\n    }\n\n    // If we have a previous canvas already animating,\n    // add to it\n    if (animationObj) {\n      return animationObj.addFettis(fettis);\n    }\n\n    animationObj = animate(canvas, fettis, size);\n  }\n\n  function fire(options: iConfettiOptions) {\n    const size = {\n      width: options.width,\n      height: options.height\n    };\n\n    return fireLocal(options, size);\n  }\n\n  const frame = (frame: number) => {\n    if (animationObj) animationObj.update(frame);\n  };\n\n  return {fire, frame};\n}\n", "import { iConfettiOptions } from './interfaces'\n\nconst confettiDefaults: iConfettiOptions = {\n  particleCount: 50,\n  angle: 90,\n  spread: 45,\n  startVelocity: 45,\n  decay: 0.9,\n  gravity: 1,\n  drift: 0,\n  ticks: 200,\n  x: 0.5,\n  y: 0.5,\n  shapes: ['square', 'circle'],\n  colors: [\n    '#26ccff',\n    '#a25afd',\n    '#ff5e7e',\n    '#88ff5a',\n    '#fcff42',\n    '#ffa62d',\n    '#ff36ff'\n  ],\n  scalar: 1,\n  width: 1280,\n  height: 720\n};\n\nexport const convert = (val: string | number, transform: ((value:any)=>any) | undefined) => {\n  return transform ? transform(val) : val;\n}\n\nexport const isOk = (val: string | number): boolean => {\n  return !(val === null || val === undefined);\n}\n\nexport const prop = (options: {[index: string]: any}, name: keyof iConfettiOptions, transform?: ((value:any)=>any)) => {\n  return convert(\n    options && isOk(options[name]) ? options[name] : confettiDefaults[name],\n    transform\n  );\n}\n\nexport const onlyPositiveInt = (number: number): number => {\n  return number < 0 ? 0 : Math.floor(number);\n}\n\nexport const randomInt = (min: number, max: number) => {\n  // eslint-disable-next-line @remotion/deterministic-randomness\n  return Math.floor(Math.random() * (max - min)) + min;\n}\n\nexport const toDecimal = (str: string) => {\n  return parseInt(str, 16);\n}\n\nexport const colorsToRgb = (colors: string[]) => {\n  return colors.map(hexToRgb);\n}\n\nexport const hexToRgb = (str: string) => {\n  let val = String(str).replace(/[^0-9a-f]/gi, '');\n\n  if (val.length < 6) {\n    val = val[0] + val[0] + val[1] + val[1] + val[2] + val[2];\n  }\n\n  return {\n    r: toDecimal(val.substring(0, 2)),\n    g: toDecimal(val.substring(2, 4)),\n    b: toDecimal(val.substring(4, 6))\n  };\n}\n"],
  "mappings": "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",
  "names": []
}
