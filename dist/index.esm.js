"use strict";import{useState as L,useEffect as T,useRef as H}from"react";import{useCurrentFrame as $,useVideoConfig as j}from"remotion";import{random as s}from"remotion";var F={particleCount:50,angle:90,spread:45,startVelocity:45,decay:.9,gravity:1,drift:0,ticks:200,x:.5,y:.5,shapes:["square","circle"],colors:["#26ccff","#a25afd","#ff5e7e","#88ff5a","#fcff42","#ffa62d","#ff36ff"],scalar:1,width:1280,height:720},A=(r,t)=>t?t(r):r,N=r=>r!=null,l=(r,t,n)=>A(r&&N(r[t])?r[t]:F[t],n),C=r=>r<0?0:Math.floor(r),v=(r,t)=>Math.floor(Math.random()*(t-r))+r,y=r=>parseInt(r,16),x=r=>r.map(V),V=r=>{let t=String(r).replace(/[^0-9a-f]/gi,"");return t.length<6&&(t=t[0]+t[0]+t[1]+t[1]+t[2]+t[2]),{r:y(t.substring(0,2)),g:y(t.substring(2,4)),b:y(t.substring(4,6))}};var S=Math.PI/180,X=r=>{let t=r.angle*S,n=r.spread*S;return{x:r.x,y:r.y,wobble:s("wobble"+r.i)*10,wobbleSpeed:Math.min(.11,s("wobbleSpeed"+r.i)*.1+.05),velocity:r.startVelocity*.5+s("velocity"+r.i)*r.startVelocity,angle2D:-t+(.5*n-s("angle2D"+r.i)*n),tiltAngle:(s("tiltAngle"+r.i)*(.75-.25)+.25)*Math.PI,color:r.color,shape:r.shape,tick:0,totalTicks:r.ticks,decay:r.decay,drift:r.drift,random:s("random"+r.i)+2,tiltSin:0,tiltCos:0,wobbleX:0,wobbleY:0,gravity:r.gravity*3,ovalScalar:.6,scalar:r.scalar}},Y=(r,t,n)=>{let o=t.wobble+t.wobbleSpeed*n,a=t.velocity,{x:e}=t,{y:i}=t;for(let b=0;b<n;b++)a*=t.decay,e+=Math.cos(t.angle2D)*a+t.drift,i+=Math.sin(t.angle2D)*a+t.gravity;t.tiltAngle=.1*n,t.tiltSin=Math.sin(t.tiltAngle),t.tiltCos=Math.cos(t.tiltAngle),t.random=Math.random()+2,t.wobbleX=e+10*t.scalar*Math.cos(o),t.wobbleY=i+10*t.scalar*Math.sin(o);let h=n/t.totalTicks,c=e+t.random*t.tiltCos,u=i+t.random*t.tiltSin,d=t.wobbleX+t.random*t.tiltCos,g=t.wobbleY+t.random*t.tiltSin;return r.fillStyle="rgba("+t.color.r+", "+t.color.g+", "+t.color.b+", "+(1-h)+")",r.beginPath(),t.shape==="circle"?r.ellipse(e,i,Math.abs(d-c)*t.ovalScalar,Math.abs(g-u)*t.ovalScalar,Math.PI/10*o,0,2*Math.PI):(r.moveTo(Math.floor(e),Math.floor(i)),r.lineTo(Math.floor(t.wobbleX),Math.floor(u)),r.lineTo(Math.floor(d),Math.floor(g)),r.lineTo(Math.floor(c),Math.floor(t.wobbleY))),r.closePath(),r.fill(),!0},E=(r,t,n)=>{let o=r.getContext("2d"),a=t.slice();function e(){!o||o.clearRect(0,0,n.width,n.height)}function i(h){!o||(!n.width&&!n.height&&(n.width=r.width,n.height=r.height),o.clearRect(0,0,n.width,n.height),a=a.filter(c=>Y(o,c,h)),a.length||e())}return{canvas:r,update:i}},O=r=>{let t;function n(e,i){let h=l(e,"particleCount",C),c=l(e,"angle",Number),u=l(e,"spread",Number),d=l(e,"startVelocity",Number),g=l(e,"decay",Number),b=l(e,"gravity",Number),I=l(e,"drift",Number),w=l(e,"colors",x),P=l(e,"ticks",Number),p=l(e,"shapes"),R=l(e,"scalar"),M={x:e.x,y:e.y},m=h,f=[],k=M.x,D=M.y;for(;m--;)f.push(X({x:k,y:D,angle:c,spread:u,startVelocity:d,color:w[m%w.length],shape:p[v(0,p.length)],ticks:P,decay:g,gravity:b,drift:I,scalar:R,i:m}));if(t)return t.addFettis(f);t=E(r,f,i)}function o(e){let i={width:e.width,height:e.height};return n(e,i)}return{fire:o,frame:e=>{t&&t.update(e)}}};var W=r=>{let t=$(),n=j(),o=H(null),[a,e]=L(null);return T(()=>{if(o.current!==null&&!a){o.current.width=n.width,o.current.height=n.height;let i=O(o.current);i.fire({...r,width:n.width,height:n.height}),e(i)}},[r,a,n]),T(()=>{a&&a.frame(t)},[a,t]),React.createElement("canvas",{ref:o,style:{width:`${n.width}px`,height:`${n.height}px`,position:"absolute"}})};export{W as Confetti};
//# sourceMappingURL=index.esm.js.map
