"use strict";import{useState as H,useEffect as T,useRef as $}from"react";import{useCurrentFrame as j,useVideoConfig as q}from"remotion";import{random as c}from"remotion";import{random as F}from"remotion";var A={particleCount:50,angle:90,spread:45,startVelocity:45,decay:.9,gravity:1,drift:0,ticks:200,x:.5,y:.5,shapes:["square","circle"],colors:["#26ccff","#a25afd","#ff5e7e","#88ff5a","#fcff42","#ffa62d","#ff36ff"],scalar:1,width:1280,height:720},N=(r,t)=>t?t(r):r,V=r=>r!=null,l=(r,t,e)=>N(r&&V(r[t])?r[t]:A[t],e),M=r=>r<0?0:Math.floor(r),v=(r,t)=>Math.floor(F("int")*(t-r))+r,y=r=>parseInt(r,16),x=r=>r.map(X),X=r=>{let t=String(r).replace(/[^0-9a-f]/gi,"");return t.length<6&&(t=t[0]+t[0]+t[1]+t[1]+t[2]+t[2]),{r:y(t.substring(0,2)),g:y(t.substring(2,4)),b:y(t.substring(4,6))}};var S=Math.PI/180,Y=r=>{let t=r.angle*S,e=r.spread*S;return{x:r.x,y:r.y,wobble:c("wobble"+r.i)*10,wobbleSpeed:Math.min(.11,c("wobbleSpeed"+r.i)*.1+.05),velocity:r.startVelocity*.5+c("velocity"+r.i)*r.startVelocity,angle2D:-t+(.5*e-c("angle2D"+r.i)*e),tiltAngle:(c("tiltAngle"+r.i)*(.75-.25)+.25)*Math.PI,color:r.color,shape:r.shape,tick:0,totalTicks:r.ticks,decay:r.decay,drift:r.drift,random:c("random"+r.i)+2,tiltSin:0,tiltCos:0,wobbleX:0,wobbleY:0,gravity:r.gravity*3,ovalScalar:.6,scalar:r.scalar}},E=(r,t,e)=>{let o=t.wobble+t.wobbleSpeed*e,i=t.velocity,{x:n}=t,{y:a}=t;for(let b=0;b<e;b++)i*=t.decay,n+=Math.cos(t.angle2D)*i+t.drift,a+=Math.sin(t.angle2D)*i+t.gravity;t.tiltAngle=.1*e,t.tiltSin=Math.sin(t.tiltAngle),t.tiltCos=Math.cos(t.tiltAngle),t.random=c(e)+2,t.wobbleX=n+10*t.scalar*Math.cos(o),t.wobbleY=a+10*t.scalar*Math.sin(o);let h=e/t.totalTicks,s=n+t.random*t.tiltCos,u=a+t.random*t.tiltSin,d=t.wobbleX+t.random*t.tiltCos,g=t.wobbleY+t.random*t.tiltSin;return r.fillStyle="rgba("+t.color.r+", "+t.color.g+", "+t.color.b+", "+(1-h)+")",r.beginPath(),t.shape==="circle"?r.ellipse(n,a,Math.abs(d-s)*t.ovalScalar,Math.abs(g-u)*t.ovalScalar,Math.PI/10*o,0,2*Math.PI):(r.moveTo(Math.floor(n),Math.floor(a)),r.lineTo(Math.floor(t.wobbleX),Math.floor(u)),r.lineTo(Math.floor(d),Math.floor(g)),r.lineTo(Math.floor(s),Math.floor(t.wobbleY))),r.closePath(),r.fill(),!0},L=(r,t,e)=>{let o=r.getContext("2d"),i=t.slice();function n(){!o||o.clearRect(0,0,e.width,e.height)}function a(h){!o||(!e.width&&!e.height&&(e.width=r.width,e.height=r.height),o.clearRect(0,0,e.width,e.height),i=i.filter(s=>E(o,s,h)),i.length||n())}return{canvas:r,update:a}},O=r=>{let t;function e(n,a){let h=l(n,"particleCount",M),s=l(n,"angle",Number),u=l(n,"spread",Number),d=l(n,"startVelocity",Number),g=l(n,"decay",Number),b=l(n,"gravity",Number),I=l(n,"drift",Number),w=l(n,"colors",x),P=l(n,"ticks",Number),p=l(n,"shapes"),R=l(n,"scalar"),C={x:n.x,y:n.y},m=h,f=[],k=C.x,D=C.y;for(;m--;)f.push(Y({x:k,y:D,angle:s,spread:u,startVelocity:d,color:w[m%w.length],shape:p[v(0,p.length)],ticks:P,decay:g,gravity:b,drift:I,scalar:R,i:m}));if(t)return t.addFettis(f);t=L(r,f,a)}function o(n){let a={width:n.width,height:n.height};return e(n,a)}return{fire:o,frame:n=>{t&&t.update(n)}}};var B=r=>{let t=j(),e=q(),o=$(null),[i,n]=H(null);return T(()=>{if(o.current!==null&&!i){o.current.width=e.width,o.current.height=e.height;let a=O(o.current);a.fire({...r,width:e.width,height:e.height}),n(a)}},[r,i,e]),T(()=>{i&&i.frame(t)},[i,t]),React.createElement("canvas",{ref:o,style:{width:`${e.width}px`,height:`${e.height}px`,position:"absolute"}})},z=B;export{B as Confetti,z as default};
//# sourceMappingURL=index.esm.js.map
